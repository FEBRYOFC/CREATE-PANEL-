You are operating inside a GitHub Codespace.

Your task is to generate a COMPLETE, production-ready Docker Compose stack for Pterodactyl Panel using the official image:

ghcr.io/pterodactyl/panel:v1.11

STRICT REQUIREMENTS:

1. Generate ONLY these files:
   
   - docker-compose.yml
   - nginx.conf
   - .env.example

2. Architecture MUST be:

nginx (reverse proxy)
→ fastcgi
→ panel (php-fpm)
→ mariadb:10.11
→ redis:7-alpine
→ worker
→ scheduler

3. CRITICAL RULES:

- DO NOT mount /app/public as volume
- ONLY mount /app/storage as volume
- nginx must use fastcgi_pass panel:9000
- panel service must expose port 9000 internally
- nginx must expose port 8080 externally

4. panel service MUST auto-initialize safely:

Use entrypoint command that:

- waits for database readiness
- generates APP_KEY if missing
- runs migrations safely
- starts php-fpm

Example logic required:

wait until mysqladmin ping works
if APP_KEY empty → generate
run php artisan migrate --force
start php-fpm

5. worker service MUST run:

php artisan queue:work --sleep=3 --tries=3

6. scheduler service MUST run:

while true; do php artisan schedule:run; sleep 60; done

7. mariadb requirements:

image: mariadb:10.11
persistent volume required
healthcheck required

8. redis requirements:

image: redis:7-alpine
persistent volume required
healthcheck required

9. nginx requirements:

root /app/public;
index index.php;
fastcgi_pass panel:9000;
try_files $uri $uri/ /index.php?$query_string;

10. ALL services must use same network

11. ALL persistent data must use named volumes

12. MUST work inside GitHub Codespaces without modification

13. Must prevent:

- Error 500
- Missing APP_KEY
- Database race condition
- Permission errors
- Volume override errors

OUTPUT FORMAT:

docker-compose.yml
nginx.conf
.env.example

NO explanations.
ONLY files.

Production-ready.
